<!-- Checkout Form -->
<div class="checkout row d-flex justify-content-center pt-5 pb-5">
    <div class="col-md-7 col-11">
        <h3 class="text-center">Checkout</h3>
        <form [formGroup]="checkoutFormGroup" (ngSubmit)="onSubmit()">
            <!-- customer form group-->
            <div formGroupName="customer" class="form-area">
                <h4>Customer</h4>
                <div class="row">
                    <div class="col-md-2">
                        <label>First Name</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <input formControlName="firstName" type="text" style="width:100%;">
                            <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="alert alert-danger mt-1">
                                <div *ngIf="firstName.errors.required || firstName.errors.notOnlyWhitespace">First name is required</div>
                                <div *ngIf="firstName.errors.minlength || firstName.errors.pattern">First name must be a minimum of 2 characters
                                    long</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Last Name</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <input formControlName="lastName" type="text" style="width:100%;">
                            <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="alert alert-danger mt-1">
                                <div *ngIf="lastName.errors.required || lastName.errors.notOnlyWhitespace">Last name is required</div>
                                <div *ngIf="lastName.errors.minlength || lastName.errors.pattern">Last name must be a minimum of 2 characters long</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Email</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <input formControlName="email" type="text" style="width:100%;">
                            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger mt-1">
                                <div *ngIf="email.errors.required">Email is required</div>
                                <div *ngIf="email.errors.pattern">Email must be a valid email address format</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end of customer form group -->

            <!-- credit card form group -->
            <div formGroupName="creditCard" class="form-area my-5">
                <h4>Credit Card</h4>
                <div class="row">
                    <div class="col-md-2">
                        <label>Card Type</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <select formControlName="cardType" style="min-width: 50%;">
                                <option>Visa</option>
                                <option>Mastercard</option>
                            </select>
                            <div *ngIf="creditCardType.invalid && (creditCardType.dirty || creditCardType.touched)" class="alert alert-danger mt-1">
                                <div *ngIf="creditCardType.errors.required">Card type is required</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Name on Card</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <input formControlName="nameOnCard" type="text" style="width:100%;">
                            <div *ngIf="creditCardNameOnCard.invalid && (creditCardNameOnCard.dirty || creditCardNameOnCard.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="creditCardNameOnCard.errors.required || creditCardNameOnCard.errors.notOnlyWhitespace">Name is required
                                </div>
                                <div *ngIf="creditCardNameOnCard.errors.minlength">Name must be a minimum of 2 characters long</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Card Number</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <input formControlName="cardNumber" type="text" style="width:100%;">
                            <div *ngIf="creditCardNumber.invalid && (creditCardNumber.dirty || creditCardNumber.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="creditCardNumber.errors.required">Card number is required</div>
                                <div *ngIf="creditCardNumber.errors.pattern">Card number must be 16 digits long</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Security Code</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <input formControlName="securityCode" type="text" style="width:100%;">
                            <div *ngIf="creditCardSecurityCode.invalid && (creditCardSecurityCode.dirty || creditCardSecurityCode.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="creditCardSecurityCode.errors.required">Security code is required</div>
                                <div *ngIf="creditCardSecurityCode.errors.pattern">Security code must be 3 digits long</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Expiration Month</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <select class="selectpicker" formControlName="expirationMonth" style="min-width: 50%;">
                                <option disabled selected value="">MM</option>
                                <option *ngFor="let month of creditCardMonths">{{month}}</option>
                            </select>
                            <div *ngIf="creditCardExpirationMonth.invalid && (creditCardExpirationMonth.dirty || creditCardExpirationMonth.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="creditCardExpirationMonth.errors.required">Expiration month is required</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Expiration Year</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <select formControlName="expirationYear" (change)="handleMonthsAndYears()"style="min-width: 50%;">
                                <option disabled selected value="">YYYY</option>
                                <option *ngFor="let year of creditCardYears">{{year}}</option>
                            </select>
                            <div *ngIf="creditCardExpirationYear.invalid && (creditCardExpirationYear.dirty || creditCardExpirationYear.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="creditCardExpirationYear.errors.required">Expiration year is required</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end of credit card form group -->

            <!-- billing address form group-->
            <div formGroupName="billingAddress" class="form-area my-5">
                <h4>Billing Address</h4>
                <div class="row">
                    <div class="col-md-2">
                        <label>Country</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <select formControlName="country" (change)="getCounties('billingAddress')" style="min-width: 50%;">
                                <option *ngFor="let country of countries" [ngValue]="country">
                                    {{country.name}}
                                </option>
                            </select>
                            <div *ngIf="billingAddressCountry.invalid && (billingAddressCountry.dirty || billingAddressCountry.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="billingAddressCountry.errors.required">Country is required</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Street</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <input formControlName="street" type="text" style="width:100%;">
                            <div *ngIf="billingAddressStreet.invalid && (billingAddressStreet.dirty || billingAddressStreet.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="billingAddressStreet.errors.required || billingAddressStreet.errors.notOnlyWhitespace">Street is
                                    required</div>
                                <div *ngIf="billingAddressStreet.errors.minlength">Street must be a minimum of 2 characters long</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>City</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <input formControlName="city" type="text" style="width:100%;">
                            <div *ngIf="billingAddressCity.invalid && (billingAddressCity.dirty || billingAddressCity.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="billingAddressCity.errors.required || billingAddressCity.errors.notOnlyWhitespace">City is required
                                </div>
                                <div *ngIf="billingAddressCity.errors.minlength">City must be a minimum of 2 characters long</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>County</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <select formControlName="county" style="min-width: 50%;">
                                <option *ngFor="let county of billingAddressCounties" [ngValue]="county">{{ county.name }}</option>
                            </select>
                            <div *ngIf="billingAddressCounty.invalid && (billingAddressCounty.dirty || billingAddressCounty.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="billingAddressCounty.errors.required">County is required</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Post Code</label>
                    </div>
                    <div class="col-md-9">
                        <div class="input-space">
                            <input formControlName="postCode" type="text" style="width:100%;">
                            <div *ngIf="billingAddressPostCode.invalid && (billingAddressPostCode.dirty || billingAddressPostCode.touched)"
                                class="alert alert-danger mt-1">
                                <div *ngIf="billingAddressPostCode.errors.required || billingAddressPostCode.errors.notOnlyWhitespace">Post
                                    code is required
                                </div>
                                <div *ngIf="billingAddressPostCode.errors.minlength">Post code must be a minimum of 5 characters long</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end of billing address form group -->

            <!-- order details -->
            <div class="form-area">
                <h4>Review Your Order</h4>
                <p>Total Price: {{totalPrice | currency: 'EUR'}}</p>
            </div>

            <!-- submit -->
            <div class="text-center">
                <button type="submit" class="btn btn-dark">Order</button>
            </div>
        </form>
    </div>
</div>
<!-- End of Checkout Form -->